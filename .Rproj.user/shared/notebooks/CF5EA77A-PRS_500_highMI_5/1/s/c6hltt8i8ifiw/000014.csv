"0","# Reference "
"0","# https://stats.idre.ucla.edu/r/seminars/rcfa/"
"0","# http://www2.hawaii.edu/~georgeha/Handouts/meas/Exercises/_book/irm.html"
"0",""
"0","packages = c(""psych"",""corrplot"",""lavaan"",""TAM"",""CDM"",""readxl"",""psycModel"",""ltm"",""gtsummary"",""reshape2"",""dplyr"",""lmtest"")"
"0","lapply(packages, library, character.only = TRUE)"
"2","corrplot 0.92 loaded
"
"2","This is lavaan 0.6-9
lavaan is FREE software! Please report any bugs.
"
"2","
Attaching package: ‘lavaan’

"
"2","The following object is masked from ‘package:psych’:

    cor2cov

"
"2","Loading required package: CDM
"
"2","Loading required package: mvtnorm
"
"2","**********************************
** CDM 7.5-15 (2020-03-10 14:19:21)      
** Cognitive Diagnostic Models  **
**********************************

"
"2","* TAM 3.7-16 (2021-06-24 14:31:37)
"
"2","Loading required package: MASS
"
"2","Loading required package: msm
"
"2","Loading required package: polycor
"
"2","
Attaching package: ‘polycor’

"
"2","The following object is masked from ‘package:psych’:

    polyserial

"
"2","
Attaching package: ‘ltm’

"
"2","The following object is masked from ‘package:psych’:

    factor.scores

"
"2","Registered S3 methods overwritten by 'htmltools':
  method               from         
  print.html           tools:rstudio
  print.shiny.tag      tools:rstudio
  print.shiny.tag.list tools:rstudio
"
"2","
Attaching package: ‘gtsummary’

"
"2","The following object is masked from ‘package:MASS’:

    select

"
"2","
Attaching package: ‘dplyr’

"
"2","The following object is masked from ‘package:MASS’:

    select

"
"2","The following objects are masked from ‘package:stats’:

    filter, lag

"
"2","The following objects are masked from ‘package:base’:

    intersect, setdiff, setequal, union

"
"2","Loading required package: zoo
"
"2","
Attaching package: ‘zoo’

"
"2","The following objects are masked from ‘package:base’:

    as.Date, as.Date.numeric

"
"1","[[1]]
"
"1","[1]"
"1"," ""psych""    "
"1"," ""stats""    "
"1"," ""graphics"" "
"1"," ""grDevices"""
"1"," ""utils""    "
"1"," ""datasets"" "
"1"," ""methods""  "
"1"," ""base""     "
"1","
"
"1","
"
"1","[[2]]
"
"1","[1]"
"1"," ""corrplot"" "
"1"," ""psych""    "
"1"," ""stats""    "
"1"," ""graphics"" "
"1"," ""grDevices"""
"1"," ""utils""    "
"1"," ""datasets"" "
"1"," ""methods""  "
"1"," ""base""     "
"1","
"
"1","
"
"1","[[3]]
"
"1"," [1]"
"1"," ""lavaan""   "
"1"," ""corrplot"" "
"1"," ""psych""    "
"1"," ""stats""    "
"1"," ""graphics"" "
"1"," ""grDevices"""
"1"," ""utils""    "
"1"," ""datasets"" "
"1"," ""methods""  "
"1","
"
"1","[10]"
"1"," ""base""     "
"1","
"
"1","
"
"1","[[4]]
"
"1"," [1]"
"1"," ""TAM""      "
"1"," ""CDM""      "
"1"," ""mvtnorm""  "
"1"," ""lavaan""   "
"1"," ""corrplot"" "
"1"," ""psych""    "
"1"," ""stats""    "
"1"," ""graphics"" "
"1"," ""grDevices"""
"1","
"
"1","[10]"
"1"," ""utils""    "
"1"," ""datasets"" "
"1"," ""methods""  "
"1"," ""base""     "
"1","
"
"1","
"
"1","[[5]]
"
"1"," [1]"
"1"," ""TAM""      "
"1"," ""CDM""      "
"1"," ""mvtnorm""  "
"1"," ""lavaan""   "
"1"," ""corrplot"" "
"1"," ""psych""    "
"1"," ""stats""    "
"1"," ""graphics"" "
"1"," ""grDevices"""
"1","
"
"1","[10]"
"1"," ""utils""    "
"1"," ""datasets"" "
"1"," ""methods""  "
"1"," ""base""     "
"1","
"
"1","
"
"1","[[6]]
"
"1"," [1]"
"1"," ""readxl""   "
"1"," ""TAM""      "
"1"," ""CDM""      "
"1"," ""mvtnorm""  "
"1"," ""lavaan""   "
"1"," ""corrplot"" "
"1"," ""psych""    "
"1"," ""stats""    "
"1"," ""graphics"" "
"1","
"
"1","[10]"
"1"," ""grDevices"""
"1"," ""utils""    "
"1"," ""datasets"" "
"1"," ""methods""  "
"1"," ""base""     "
"1","
"
"1","
"
"1","[[7]]
"
"1"," [1]"
"1"," ""psycModel"""
"1"," ""readxl""   "
"1"," ""TAM""      "
"1"," ""CDM""      "
"1"," ""mvtnorm""  "
"1"," ""lavaan""   "
"1"," ""corrplot"" "
"1"," ""psych""    "
"1"," ""stats""    "
"1","
"
"1","[10]"
"1"," ""graphics"" "
"1"," ""grDevices"""
"1"," ""utils""    "
"1"," ""datasets"" "
"1"," ""methods""  "
"1"," ""base""     "
"1","
"
"1","
"
"1","[[8]]
"
"1"," [1]"
"1"," ""ltm""      "
"1"," ""polycor""  "
"1"," ""msm""      "
"1"," ""MASS""     "
"1"," ""psycModel"""
"1"," ""readxl""   "
"1"," ""TAM""      "
"1"," ""CDM""      "
"1"," ""mvtnorm""  "
"1","
"
"1","[10]"
"1"," ""lavaan""   "
"1"," ""corrplot"" "
"1"," ""psych""    "
"1"," ""stats""    "
"1"," ""graphics"" "
"1"," ""grDevices"""
"1"," ""utils""    "
"1"," ""datasets"" "
"1"," ""methods""  "
"1","
"
"1","[19]"
"1"," ""base""     "
"1","
"
"1","
"
"1","[[9]]
"
"1"," [1]"
"1"," ""gtsummary"""
"1"," ""ltm""      "
"1"," ""polycor""  "
"1"," ""msm""      "
"1"," ""MASS""     "
"1"," ""psycModel"""
"1"," ""readxl""   "
"1"," ""TAM""      "
"1"," ""CDM""      "
"1","
"
"1","[10]"
"1"," ""mvtnorm""  "
"1"," ""lavaan""   "
"1"," ""corrplot"" "
"1"," ""psych""    "
"1"," ""stats""    "
"1"," ""graphics"" "
"1"," ""grDevices"""
"1"," ""utils""    "
"1"," ""datasets"" "
"1","
"
"1","[19]"
"1"," ""methods""  "
"1"," ""base""     "
"1","
"
"1","
"
"1","[[10]]
"
"1"," [1]"
"1"," ""reshape2"" "
"1"," ""gtsummary"""
"1"," ""ltm""      "
"1"," ""polycor""  "
"1"," ""msm""      "
"1"," ""MASS""     "
"1"," ""psycModel"""
"1"," ""readxl""   "
"1"," ""TAM""      "
"1","
"
"1","[10]"
"1"," ""CDM""      "
"1"," ""mvtnorm""  "
"1"," ""lavaan""   "
"1"," ""corrplot"" "
"1"," ""psych""    "
"1"," ""stats""    "
"1"," ""graphics"" "
"1"," ""grDevices"""
"1"," ""utils""    "
"1","
"
"1","[19]"
"1"," ""datasets"" "
"1"," ""methods""  "
"1"," ""base""     "
"1","
"
"1","
"
"1","[[11]]
"
"1"," [1]"
"1"," ""dplyr""    "
"1"," ""reshape2"" "
"1"," ""gtsummary"""
"1"," ""ltm""      "
"1"," ""polycor""  "
"1"," ""msm""      "
"1"," ""MASS""     "
"1"," ""psycModel"""
"1"," ""readxl""   "
"1","
"
"1","[10]"
"1"," ""TAM""      "
"1"," ""CDM""      "
"1"," ""mvtnorm""  "
"1"," ""lavaan""   "
"1"," ""corrplot"" "
"1"," ""psych""    "
"1"," ""stats""    "
"1"," ""graphics"" "
"1"," ""grDevices"""
"1","
"
"1","[19]"
"1"," ""utils""    "
"1"," ""datasets"" "
"1"," ""methods""  "
"1"," ""base""     "
"1","
"
"1","
"
"1","[[12]]
"
"1"," [1]"
"1"," ""lmtest""   "
"1"," ""zoo""      "
"1"," ""dplyr""    "
"1"," ""reshape2"" "
"1"," ""gtsummary"""
"1"," ""ltm""      "
"1"," ""polycor""  "
"1"," ""msm""      "
"1"," ""MASS""     "
"1","
"
"1","[10]"
"1"," ""psycModel"""
"1"," ""readxl""   "
"1"," ""TAM""      "
"1"," ""CDM""      "
"1"," ""mvtnorm""  "
"1"," ""lavaan""   "
"1"," ""corrplot"" "
"1"," ""psych""    "
"1"," ""stats""    "
"1","
"
"1","[19]"
"1"," ""graphics"" "
"1"," ""grDevices"""
"1"," ""utils""    "
"1"," ""datasets"" "
"1"," ""methods""  "
"1"," ""base""     "
"1","
"
"1","
"
"0","path = '/proj/PI_BICK/Projects/Genetic_Survey/ANALYST_yajing/data/'"
"0","prs_data = read_excel(paste0(path,'PRSKnowledgeScalePro_correct.incorrect (v1).xlsx'))"
"0","prs_data = prs_data %>% filter(is.na(`Survey Identifier`))"
"0","dic = read_excel(paste0(path,'PRSKnowledgeScaleProlificco_DataDictionary_2022-01-31_raw.xlsx'))"
"0","colnames(prs_data)[9:18]= as.matrix(dic %>% select(1) %>% filter(row_number() %in% c(7:16)))"
"0","prs_data[,9:18] = lapply(prs_data[,9:18],as.numeric)"
"0","prs_data$prs_lim_race_inequality[is.na(prs_data$prs_lim_race_inequality)] = 0"
"0","prs = prs_data[,9:18][,-c(5,7)]"
"0",""
"0","# prs_74 = read_excel('~/MyProjects/PI_BICK/Genetic_Survey/data/PRS data_clean_correct.incorrect (v5).xlsx')"
"0","# "
"0","# PRSSum = rowSums(prs)"
"0","# hist(PRSSum,breaks = 20)"
"0","# summary(PRSSum)"
"0","# qqnorm(PRSSum + rnorm(500,0,0.5))"
"0","# "
"0","# prs_all = rbind(cbind(prs_data[,5:8],PRSSum),prs_74[,c(4:7,19)])"
"0","# colnames(prs_all)[1] = ""Age"""
"0","# prs_all$Graduate = ""N"""
"0","# prs_all$Graduate[501:574] = ""Y"""
"0","# hist(prs_all$PRSSum)"
"0","# hist(prs_74$PRSSum)"
"0","# "
"0","# demo_fit = lm(PRSSum~Age+Sex+Race+Ethnicity+Graduate,data = prs_all)"
"0","# summary(demo_fit)"
